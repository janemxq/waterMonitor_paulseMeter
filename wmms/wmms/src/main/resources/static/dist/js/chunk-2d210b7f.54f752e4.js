(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d210b7f"],{b8a4:function(a,e,t){"use strict";t.r(e);var l=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("Form",{ref:"form",staticStyle:{"min-height":"300px"},attrs:{model:a.formValidate,rules:a.ruleValidate,"label-width":90}},[t("FormItem",{attrs:{label:"表井名称",prop:"groupName"}},[t("Input",{attrs:{placeholder:"请输入表井名称",clearable:""},model:{value:a.formValidate.groupName,callback:function(e){a.$set(a.formValidate,"groupName",e)},expression:"formValidate.groupName"}})],1),t("FormItem",{attrs:{label:"表井编号",prop:"sn"}},[t("Input",{attrs:{placeholder:"请输入表井编号(采集器出厂编号，例如BJ00001)",clearable:"",disabled:"editWsGroup"===a.modalParams.type},model:{value:a.formValidate.sn,callback:function(e){a.$set(a.formValidate,"sn",e)},expression:"formValidate.sn"}})],1),t("FormItem",{attrs:{label:"设备地址",prop:"address"}},[t("Input",{attrs:{placeholder:"请输入设备地址(4位16进制，例如ff01)",clearable:""},model:{value:a.formValidate.address,callback:function(e){a.$set(a.formValidate,"address",e)},expression:"formValidate.address"}})],1)],1)},i=[],r=(t("20d6"),t("ac6a"),t("456d"),{name:"add",props:{show:Boolean,data:Object,modalParams:Object,infoParams:Object},data:function(){var a=this;return{formValidate:{sn:"",groupName:"",villageSn:"",villageName:"",villageId:"",id:"",address:""},VillageAll:[],api:this.$api.System,ruleValidate:{groupName:[{required:!0,message:"请输入表井名称",trigger:"blur"},{validator:function(e,t,l){a.$rule.ruleLengthMin(e,t,l,[3,20])},trigger:"blur"}],sn:[{required:!0,message:"请输入表井编号",trigger:"blur"},{validator:function(e,t,l){a.$rule.ruleNumAndLetMin(e,t,l,[2,80])},trigger:"blur"}],address:[{required:!0,message:"请输入设备地址",trigger:"change"},{validator:function(a,e,t){/^([0-9]|[a-f]|[A-F]){4}$/.test(e)||""===e?t():t("设备地址格式为4位十六进制数值")},trigger:"blur"}]}}},watch:{show:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var a=this;this.show?(this.data&&Object.keys(this.formValidate).map((function(e){a.formValidate[e]=a.data[e]})),this.infoParams&&Object.assign(this.formValidate,{villageName:this.infoParams.villageName,villageId:this.infoParams.villageId?this.infoParams.villageId:this.infoParams.id,villageSn:this.infoParams.villageSn?this.infoParams.villageSn:this.infoParams.sn})):this.handleReset()},getVillageAll:function(){var a=this;this.api.getVillageAll().then((function(e){a.VillageAll=e.data}))},handleSubmit:function(){var a=this;return new Promise((function(e,t){a.$refs["form"].validate((function(l){console.log(l),l?(console.log(Object.assign({},"edit"===a.modalParams.type&&a.data,"addGroup"===a.modalParams.type&&{createUserId:localStorage.getItem("userId")},a.formValidate,"edit"===a.modalParams.type&&{updateUserId:localStorage.getItem("userId")})),e(Object.assign({},"edit"===a.modalParams.type&&a.data,"addGroup"===a.modalParams.type&&{createUserId:localStorage.getItem("userId")},a.formValidate,"edit"===a.modalParams.type&&{updateUserId:localStorage.getItem("userId")}))):t("填写内容有误，请查验")}))}))},handleReset:function(){this.$refs["form"]&&this.$refs["form"].resetFields()},onChange:function(a){var e=this.VillageAll.findIndex((function(e){return e.sn===a}));-1!==e&&(this.formValidate.villageName=this.VillageAll[e].villageName,this.formValidate.villageId=this.VillageAll[e].id)}}}),s=r,o=t("2877"),d=Object(o["a"])(s,l,i,!1,null,"313e00d1",null);e["default"]=d.exports}}]);